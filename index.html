<!doctype html>
<html lang="pt-BR">  
<head>  
  <meta charset="utf-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />  
  <title>Pintando a Palavra ‚Äî Colorir</title>  
  <link rel="stylesheet" href="css/style.css" />  

  <style>
    /* --- CONFIGURA√á√ÉO DE LAYOUT --- */
    body {
      margin: 0;
      padding: 0;
      background: #fffdf2;
      font-family: "Fredoka", sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow-y: auto; /* Permite a rolagem da p√°gina inteira */
    }

    /* üèÜ BARRA DE PROGRESSO (FIXA NO TOPO) */
    .topbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #fff;
      padding: 10px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      z-index: 2000; /* Garante que fique acima de tudo */
    }

    .progress-widget {
      max-width: 90%;
      margin: 0 auto;
      text-align: center;
    }

    .counter {
      font-weight: 900;
      font-size: 1.1rem;
      margin-bottom: 5px;
      display: block;
    }

    .progressbar {
      height: 12px;
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #ddd;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffca28, #ffb300);
      width: 0%; /* Atualizado pelo seu JS */
      transition: width 0.4s ease;
    }

    /* üì¶ CONTAINER PRINCIPAL (ABAIXO DA TOPBAR) */
    .wrap {
      margin-top: 80px; /* Espa√ßo para n√£o sumir atr√°s da barra de progresso */
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    /* üé® √ÅREA DO DESENHO */
    .stage {
      width: 90%;
      max-width: 800px;
      background: #fff;
      border-radius: 20px;
      padding: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      margin-bottom: 30px;
    }

    .svgMount {
      width: 100%;
      aspect-ratio: 4/5;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: none; /* Necess√°rio para o seu script de Zoom */
    }

    /* üü° PAINEL AMARELO (NO FLUXO DA P√ÅGINA) */
    .controls {
      width: 100%;
      background: #ffe082;
      padding: 40px 10px 60px 10px;
      border-radius: 40px 40px 0 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
    }

    /* Organiza√ß√£o dos bot√µes para n√£o embolar */
    .swatches {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      max-width: 500px;
    }

    .sw {
      width: 45px;
      height: 45px;
      border-radius: 50% !important;
      border: 3px solid #fff;
      background: var(--c);
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      cursor: pointer;
    }

    .tools {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
    }

    .btn {
      padding: 10px 15px;
      border-radius: 10px;
      border: none;
      background: #ffb703;
      font-weight: bold;
      box-shadow: 0 4px 0 #e6a700;
      cursor: pointer;
    }
    .btn.primary { background: #2ecc71; color: white; box-shadow: 0 4px 0 #27ae60; }

    .pager {
      display: flex;
      align-items: center;
      gap: 20px;
      font-weight: bold;
    }
    .navbtn {
      width: 45px; height: 35px; border-radius: 8px; border: none; background: #ffd166; cursor: pointer;
    }

    /* üåÄ Outros Estilos (Carregamento e Popups) */
    #loadingOverlay { position: fixed; inset: 0; background: #fff9e6; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; transition: opacity .5s; }
    #loadingOverlay.hidden { opacity: 0; visibility: hidden; }
    .spinner { width: 50px; height: 50px; border: 5px solid #ffd54f; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    
    .palette-popup { position: fixed; background: #fff; border: 2px solid #ffd54f; border-radius: 14px; padding: 10px; display: grid; grid-template-columns: repeat(6, 28px); gap: 6px; box-shadow: 0 6px 16px rgba(0,0,0,.18); z-index: 3000; display: none; }
    .palette-popup.active { display: grid; }
    .extra-color { width: 28px; height: 28px; border-radius: 6px; cursor: pointer; border: 1px solid rgba(0,0,0,0.1); }
  </style>
</head>

<body>
  <div id="loadingOverlay">
    <div class="spinner"></div>
    <div class="loading-text">üé® Carregando artes...</div>
  </div>

  <header class="topbar">
    <div id="progressWidget" class="progress-widget">
      <div class="counter">
        <span id="starCount">00</span> / <span id="totalPages">00</span> ‚òÖ <span id="progressPercent">0%</span>
      </div>
      <div class="progressbar"><div id="progressFill" class="progress-fill"></div></div>
    </div>
  </header>

  <main class="wrap">
    <section class="stage">
      <div id="svgMount" class="svgMount"></div>
    </section>

    <section class="controls">
      <div class="palette">
        <div class="swatches" id="swatches">
          <button class="sw" data-color="#E53935" style="--c:#E53935"></button>
          <button class="sw" data-color="#FB8C00" style="--c:#FB8C00"></button>
          <button class="sw" data-color="#FDD835" style="--c:#FDD835"></button>
          <button class="sw" data-color="#7CB342" style="--c:#7CB342"></button>
          <button class="sw" data-color="#42A5F5" style="--c:#42A5F5"></button>
          <button class="sw" data-color="#8E24AA" style="--c:#8E24AA"></button>
          <button class="sw" data-color="#E0C2A2" style="--c:#E0C2A2"></button>
          <button class="sw" data-color="#8D6E63" style="--c:#8D6E63"></button>
          <button class="sw custom-picker" id="pickerBtn">üé®</button>
          <input type="color" id="colorPickerInput" style="display:none;" />
          <button class="sw custom" id="customColorBtn">+</button>
        </div>

        <div class="tools">
          <button id="eraserBtn" class="btn">Borracha</button>
          <button id="undoBtn" class="btn">Desfazer</button>
          <button id="redoBtn" class="btn">Refazer</button>
          <button id="savePng" class="btn primary">Salvar PNG</button>
        </div>

        <div class="pager">
          <button id="prevBtn" class="navbtn">‚óÄ</button>
          <span id="pageLabel">1 / 80</span>
          <button id="nextBtn" class="navbtn">‚ñ∂</button>
        </div>
      </div>
    </section>
  </main>

  <script src="js/pintura.js"></script>
  <script src="js/script.js"></script>
  <script src="js/patch-gestures-scroll.js"></script>

  </body>
</html>
